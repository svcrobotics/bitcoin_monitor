<%# app/views/trade_simulations/_trade_simulation.html.erb %>

<div id="<%= dom_id trade_simulation %>"
     class="rounded-2xl border border-gray-800 bg-gray-900/50 p-5 space-y-4">

  <%# ---- Header ---- %>
  <div class="flex items-start justify-between gap-3">
    <div class="min-w-0">
      <p class="text-sm text-gray-400">Simulation</p>
      <p class="text-gray-100 font-semibold">
        <span class="font-mono"><%= trade_simulation.buy_day %></span>
        â†’
        <span class="font-mono"><%= trade_simulation.sell_day %></span>
      </p>
    </div>

    <span class="shrink-0 text-xs px-2 py-1 rounded-full
                 border border-cyan-500/40 bg-cyan-600/10 text-cyan-200 font-semibold">
      Paper trade
    </span>
  </div>

  <%# ---- Metrics grid ---- %>
  <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 text-sm">

    <div class="rounded-xl border border-gray-800 bg-black/20 p-3">
      <p class="text-xs text-gray-500">BTC</p>
      <p class="font-mono text-gray-100"><%= trade_simulation.btc_amount %></p>
    </div>

    <div class="rounded-xl border border-gray-800 bg-black/20 p-3">
      <p class="text-xs text-gray-500">Slippage</p>
      <p class="font-mono text-gray-100"><%= trade_simulation.slippage_pct %>%</p>
    </div>

    <div class="rounded-xl border border-gray-800 bg-black/20 p-3">
      <p class="text-xs text-gray-500">Frais achat</p>
      <p class="font-mono text-gray-100">
        <%= trade_simulation.buy_fee_pct %>%
        <span class="text-gray-400">+</span>
        <%= trade_simulation.buy_fee_fixed_eur %>
      </p>
    </div>

    <div class="rounded-xl border border-gray-800 bg-black/20 p-3">
      <p class="text-xs text-gray-500">Frais vente</p>
      <p class="font-mono text-gray-100">
        <%= trade_simulation.sell_fee_pct %>%
        <span class="text-gray-400">+</span>
        <%= trade_simulation.sell_fee_fixed_eur %>
      </p>
    </div>

  </div>

  <%# ---- Notes ---- %>
  <% if trade_simulation.notes.present? %>
    <div class="rounded-xl border border-gray-800 bg-black/20 p-3">
      <p class="text-xs text-gray-500 mb-1">Notes</p>
      <p class="text-sm text-gray-100 whitespace-pre-wrap">
        <%= trade_simulation.notes %>
      </p>
    </div>
  <% end %>

</div>
